// Ion.RangeSlider
// version 1.6.3
// https://github.com/IonDen/ion.rangeSlider
!function(a){var b=0,c=function(a){var b=a.toString();return b.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")},d=function(){var c,a=navigator.userAgent,b=/msie\s\d+/i;return a.search(b)>0?(c=b.exec(a).toString(),c=c.split(" ")[1],9>c?!0:!1):!1}(),e=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}}(),f={init:function(f){var g=a.extend({min:10,max:100,from:10,to:100,type:"single",step:1,prefix:"",postfix:"",hasGrid:!1,hideText:!1,onChange:null,onFinish:null},f),h='<span class="irs">';h+='<span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span>',h+='<span class="irs-min">0</span><span class="irs-max">1</span>',h+='<span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span>',h+="</span>",h+='<span class="irs-grid"></span>';var i='<span class="irs-slider single"></span>',j='<span class="irs-diapason"></span>';return j+='<span class="irs-slider from"></span>',j+='<span class="irs-slider to"></span>',this.each(function(){var f=a(this);if(!f.data("isActive")){f.data("isActive",!0),b++,this.pluginCount=b;var k={min:parseInt(f.attr("value").split(";")[0])||g.min,max:parseInt(f.attr("value").split(";")[1])||g.max,from:parseInt(f.data("from"))||g.from,to:parseInt(f.data("to"))||g.to,type:f.data("type")||g.type,step:parseInt(f.data("step"))||g.step,postfix:f.data("prefix")||g.prefix,postfix:f.data("postfix")||g.postfix,hasGrid:f.data("hasgrid")||g.hasGrid,hideText:f.data("hidetext")||g.hideText};g=a.extend(g,k);var l='<span class="irs" id="irs-'+this.pluginCount+'"></span>';f[0].style.display="none",f.before(l);var p,q,r,s,t,u,v,w,x,y,z,A,m=a("#irs-"+this.pluginCount),n=a(document.body),o=a(window),B=!1,C=!1,D=!0,E={},F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0;this.updateData=function(b){g=a.extend(g,b),P()},this.removeSlider=function(){m.find("*").off(),m.html("").remove(),f.data("isActive",!1),f.show()};var P=function(){m.find("*").off(),m.html(""),Q()},Q=function(){m.html(h),p=m.find(".irs"),q=p.find(".irs-min"),r=p.find(".irs-max"),s=p.find(".irs-from"),t=p.find(".irs-to"),u=p.find(".irs-single"),A=m.find(".irs-grid"),g.hideText?(q[0].style.display="none",r[0].style.display="none",s[0].style.display="none",t[0].style.display="none",u[0].style.display="none"):(q.html(g.prefix+c(g.min)+g.postfix),r.html(g.prefix+c(g.max)+g.postfix)),G=q.outerWidth(),H=r.outerWidth(),"single"===g.type?(p.append(i),v=p.find(".single"),v.on("mousedown",function(b){b.preventDefault(),b.stopPropagation(),S(b,a(this),null),B=!0,C=!0,d&&a("*").prop("unselectable",!0)}),e&&v.on("touchstart",function(b){b.preventDefault(),b.stopPropagation(),S(b.originalEvent,a(this),null),B=!0,C=!0})):"double"===g.type&&(p.append(j),w=p.find(".from"),x=p.find(".to"),z=p.find(".irs-diapason"),T(),w.on("mousedown",function(b){b.preventDefault(),b.stopPropagation(),a(this).addClass("last"),x.removeClass("last"),S(b,a(this),"from"),B=!0,C=!0,d&&a("*").prop("unselectable",!0)}),x.on("mousedown",function(b){b.preventDefault(),b.stopPropagation(),a(this).addClass("last"),w.removeClass("last"),S(b,a(this),"to"),B=!0,C=!0,d&&a("*").prop("unselectable",!0)}),e&&(w.on("touchstart",function(b){b.preventDefault(),b.stopPropagation(),a(this).addClass("last"),x.removeClass("last"),S(b.originalEvent,a(this),"from"),B=!0,C=!0}),x.on("touchstart",function(b){b.preventDefault(),b.stopPropagation(),a(this).addClass("last"),w.removeClass("last"),S(b.originalEvent,a(this),"to"),B=!0,C=!0})),g.to===g.max&&w.addClass("last")),n.on("mouseup",function(){B&&(C=!1,B=!1,y.removeAttr("id"),y=null,"double"===g.type&&T(),V(),d&&a("*").prop("unselectable",!1))}),n.on("mousemove",function(a){B&&(F=a.pageX,U())}),e&&(o.on("touchend",function(){B&&(C=!1,B=!1,y.removeAttr("id"),y=null,"double"===g.type&&T(),V())}),o.on("touchmove",function(a){B&&(F=a.originalEvent.pageX,U())})),R(),W(),g.hasGrid&&Y()},R=function(){I=p.width(),K=v?v.width():w.width(),J=I-K},S=function(a,b,c){R(),D=!1,y=b,y.attr("id","irs-active-slider");var d=y.offset().left,e=a.pageX-d;O=d+e-y.position().left,"single"===g.type?L=p.width()-K:"double"===g.type&&("from"===c?(M=0,N=parseInt(x.css("left"))):(M=parseInt(w.css("left")),N=p.width()-K))},T=function(){var a=w.width(),b=parseInt(w[0].style.left)||w.position().left,c=parseInt(x[0].style.left)||x.position().left,d=b+a/2,e=c-b;z[0].style.left=d+"px",z[0].style.width=e+"px"},U=function(){var a=Math.round(F-O);"single"===g.type?(0>a&&(a=0),a>L&&(a=L),V()):"double"===g.type&&(M>a&&(a=M),a>N&&(a=N),V(),T()),y[0].style.left=a+"px"},V=function(){var c,d,a={fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,toX:0},b=g.max-g.min;"single"===g.type?(a.fromX=parseInt(v[0].style.left)||v.position().left,a.fromPers=100*(a.fromX/J),c=b/100*a.fromPers+parseInt(g.min),a.fromNumber=Math.round(c/g.step)*g.step):"double"===g.type&&(a.fromX=parseInt(w[0].style.left)||w.position().left,a.fromPers=100*(a.fromX/J),c=b/100*a.fromPers+parseInt(g.min),a.fromNumber=Math.round(c/g.step)*g.step,a.toX=parseInt(x[0].style.left)||x.position().left,a.toPers=100*(a.toX/J),d=b/100*a.toPers+parseInt(g.min),a.toNumber=Math.round(d/g.step)*g.step),E=a,X()},W=function(){var a={fromNumber:g.from,toNumber:g.to,fromPers:0,toPers:0,fromX:0,toX:0},b=g.max-g.min;"single"===g.type?(a.fromPers=100*((a.fromNumber-g.min)/b),a.fromX=Math.round(J/100*a.fromPers),v[0].style.left=a.fromX+"px"):"double"===g.type&&(a.fromPers=100*((a.fromNumber-g.min)/b),a.fromX=Math.round(J/100*a.fromPers),w[0].style.left=a.fromX+"px",a.toPers=100*((a.toNumber-g.min)/b),a.toX=Math.round(J/100*a.toPers),x[0].style.left=a.toX+"px",T()),E=a,X()},X=function(){var a,b,d,e,h,i,j,k,l,m=K/2;"single"===g.type?(g.hideText||(s[0].style.display="none",t[0].style.display="none",j=g.prefix+c(E.fromNumber)+g.postfix,u.html(j),k=u.outerWidth(),l=E.fromX-k/2+m,0>l&&(l=0),l>I-k&&(l=I-k),u[0].style.left=l+"px",q[0].style.display=G>l?"none":"block",r[0].style.display=l+k>I-H?"none":"block"),f.attr("value",parseInt(E.fromNumber))):"double"===g.type&&(g.hideText||(a=g.prefix+c(E.fromNumber)+g.postfix,e=g.prefix+c(E.toNumber)+g.postfix,j=E.fromNumber!=E.toNumber?g.prefix+c(E.fromNumber)+" \u2014 "+g.prefix+c(E.toNumber)+g.postfix:g.prefix+c(E.fromNumber)+g.postfix,s.html(a),t.html(e),u.html(j),b=s.outerWidth(),d=E.fromX-b/2+m,0>d&&(d=0),d>I-b&&(d=I-b),s[0].style.left=d+"px",h=t.outerWidth(),i=E.toX-h/2+m,0>i&&(i=0),i>I-h&&(i=I-h),t[0].style.left=i+"px",k=u.outerWidth(),l=E.fromX+(E.toX-E.fromX)/2-k/2+m,0>l&&(l=0),l>I-k&&(l=I-k),u[0].style.left=l+"px",i>d+b?(u[0].style.display="none",s[0].style.display="block",t[0].style.display="block"):(u[0].style.display="block",s[0].style.display="none",t[0].style.display="none"),q[0].style.display=G>l||G>d?"none":"block",r[0].style.display=l+k>I-H||i+h>I-H?"none":"block"),f.attr("value",parseInt(E.fromNumber)+";"+parseInt(E.toNumber))),"function"==typeof g.onChange&&g.onChange.call(this,E),"function"!=typeof g.onFinish||C||D||g.onFinish.call(this,E)},Y=function(){m.addClass("irs-with-grid");var a=0,b="",d=0,e=0,f="",h=20,i=4;for(a=0;h>=a;a++)d=Math.floor(I/h*a),d>=I&&(d=I-1),f+='<span class="irs-grid-pol small" style="left: '+d+'px;"></span>';for(a=0;i>=a;a++)d=Math.floor(I/i*a),d>=I&&(d=I-1),f+='<span class="irs-grid-pol" style="left: '+d+'px;"></span>',b=Math.round(g.min+(g.max-g.min)/i*a),b=Math.round(b/g.step)*g.step,b=c(b),0===a?(e=d,f+='<span class="irs-grid-text" style="left: '+e+'px; text-align: left;">'+b+"</span>"):a===i?(e=d-100,f+='<span class="irs-grid-text" style="left: '+e+'px; text-align: right;">'+b+"</span>"):(e=d-50,f+='<span class="irs-grid-text" style="left: '+e+'px;">'+b+"</span>");A.html(f)};Q()}})},update:function(a){return this.each(function(){this.updateData(a)})},remove:function(){return this.each(function(){this.removeSlider()})}};a.fn.ionRangeSlider=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist for jQuery.ionRangeSlider"),void 0):f.init.apply(this,arguments)}}(jQuery);