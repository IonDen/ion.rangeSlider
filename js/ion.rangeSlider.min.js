// Ion.RangeSlider
// version 1.8.2 Build: 149
// © 2013 Denis Ineshin | IonDen.com
//
// Project page:    http://ionden.com/a/plugins/ion.rangeSlider/
// GitHub page:     https://github.com/IonDen/ion.rangeSlider
//
// Released under MIT licence:
// http://ionden.com/a/plugins/licence-en.html
// =====================================================================================================================
(function(e,t,n,r){"use strict";var i=0,s=function(){var e=r.userAgent,t=/msie\s\d+/i,n;if(e.search(t)>0){n=t.exec(e).toString();n=n.split(" ")[1];if(n<9)return!0}return!1}(),o=function(){try{t.createEvent("TouchEvent");return!0}catch(e){return!1}}(),u={init:function(r){var u='<span class="irs"><span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>',a='<span class="irs-slider single"></span>',f='<span class="irs-diapason"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>';return this.each(function(){var l=e.extend({min:10,max:100,from:null,to:null,type:"single",step:1,prefix:"",postfix:"",hasGrid:!1,hideMinMax:!1,hideFromTo:!1,prettify:!0,width:0,onChange:null,onLoad:null,onFinish:null},r),c=e(this),h=this;if(c.data("isActive"))return;c.data("isActive",!0);i+=1;this.pluginCount=i;if(c.prop("value")){l.min=parseInt(c.prop("value").split(";")[0],10);l.max=parseInt(c.prop("value").split(";")[1],10)}typeof l.from!="number"&&(l.from=l.min);typeof l.to!="number"&&(l.to=l.max);typeof c.data("from")=="number"&&(l.from=parseFloat(c.data("from")));typeof c.data("to")=="number"&&(l.to=parseFloat(c.data("to")));c.data("step")&&(l.step=parseFloat(c.data("step")));c.data("type")&&(l.type=c.data("type"));c.data("prefix")&&(l.prefix=c.data("prefix"));c.data("postfix")&&(l.postfix=c.data("postfix"));c.data("hasgrid")&&(l.hasGrid=c.data("hasgrid"));c.data("hideminmax")&&(l.hideMinMax=c.data("hideminmax"));c.data("hidefromto")&&(l.hideFromTo=c.data("hidefromto"));c.data("prettify")&&(l.prettify=c.data("prettify"));c.data("width")&&(l.width=c.data("width"));l.from<l.min&&(l.from=l.min);l.to>l.max&&(l.to=l.max);if(l.type==="double"){l.from>l.to&&(l.from=l.to);l.to<l.from&&(l.to=l.from)}var p=function(e){var t=e.toString();l.prettify&&(t=t.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 "));return t},d='<span class="irs" id="irs-'+this.pluginCount+'"></span>';c[0].style.display="none";c.before(d);var v=e("#irs-"+this.pluginCount),m=e(t.body),g=e(n),y,b,w,E,S,x,T,N,C,k,L,A,O=!1,M=!1,_=!0,D={},P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0;if(parseInt(l.step,10)!==parseFloat(l.step)){W=l.step.toString().split(".")[1];W=Math.pow(10,W.length)}this.updateData=function(t){_=!0;l=e.extend(l,t);X()};this.removeSlider=function(){v.find("*").off();g.off("mouseup.irs"+h.pluginCount);m.off("mouseup.irs"+h.pluginCount);m.off("mousemove.irs"+h.pluginCount);v.html("").remove();c.data("isActive",!1);c.show()};var X=function(){v.find("*").off();g.off("mouseup.irs"+h.pluginCount);m.off("mouseup.irs"+h.pluginCount);m.off("mousemove.irs"+h.pluginCount);v.html("");V()},V=function(){v.html(u);y=v.find(".irs");b=y.find(".irs-min");w=y.find(".irs-max");E=y.find(".irs-from");S=y.find(".irs-to");x=y.find(".irs-single");A=v.find(".irs-grid");if(l.hideMinMax){b[0].style.display="none";w[0].style.display="none";H=0;B=0}if(l.hideFromTo){E[0].style.display="none";S[0].style.display="none";x[0].style.display="none"}if(!l.hideMinMax){b.html(l.prefix+p(l.min)+l.postfix);w.html(l.prefix+p(l.max)+l.postfix);H=b.outerWidth();B=w.outerWidth()}if(l.type==="single"){y.append(a);T=y.find(".single");T.on("mousedown",function(t){t.preventDefault();t.stopPropagation();K(t,e(this),null);O=!0;M=!0;s&&e("*").prop("unselectable",!0)});o&&T.on("touchstart",function(t){t.preventDefault();t.stopPropagation();K(t.originalEvent.touches[0],e(this),null);O=!0;M=!0})}else if(l.type==="double"){y.append(f);N=y.find(".from");C=y.find(".to");L=y.find(".irs-diapason");Q();N.on("mousedown",function(t){t.preventDefault();t.stopPropagation();e(this).addClass("last");C.removeClass("last");K(t,e(this),"from");O=!0;M=!0;s&&e("*").prop("unselectable",!0)});C.on("mousedown",function(t){t.preventDefault();t.stopPropagation();e(this).addClass("last");N.removeClass("last");K(t,e(this),"to");O=!0;M=!0;s&&e("*").prop("unselectable",!0)});if(o){N.on("touchstart",function(t){t.preventDefault();t.stopPropagation();e(this).addClass("last");C.removeClass("last");K(t.originalEvent.touches[0],e(this),"from");O=!0;M=!0});C.on("touchstart",function(t){t.preventDefault();t.stopPropagation();e(this).addClass("last");N.removeClass("last");K(t.originalEvent.touches[0],e(this),"to");O=!0;M=!0})}l.to===l.max&&N.addClass("last")}var t=function(){if(O){M=!1;O=!1;k.removeAttr("id");k=null;l.type==="double"&&Q();Y();s&&e("*").prop("unselectable",!1)}};m.on("mouseup.irs"+h.pluginCount,function(){t()});g.on("mouseup.irs"+h.pluginCount,function(){t()});m.on("mousemove.irs"+h.pluginCount,function(e){if(O){P=e.pageX;G()}});if(o){g.on("touchend",function(){if(O){M=!1;O=!1;k.removeAttr("id");k=null;l.type==="double"&&Q();Y()}});g.on("touchmove",function(e){if(O){P=e.originalEvent.touches[0].pageX;G()}})}J();Z();l.hasGrid&&tt()},J=function(){j=y.width();j==0&&l.width>0&&(j=l.width);T?I=T.width():I=N.width();F=j-I},K=function(e,t,n){J();_=!1;k=t;k.attr("id","irs-active-slider");var r=k.offset().left,i=e.pageX-r;z=r+i-k.position().left;if(l.type==="single")q=y.width()-I;else if(l.type==="double")if(n==="from"){R=0;U=parseInt(C.css("left"),10)}else{R=parseInt(N.css("left"),10);U=y.width()-I}},Q=function(){var t=N.width(),n=e.data(N[0],"x")||parseInt(N[0].style.left,10)||N.position().left,r=e.data(C[0],"x")||parseInt(C[0].style.left,10)||C.position().left,i=n+t/2,s=r-n;L[0].style.left=i+"px";L[0].style.width=s+"px"},G=function(){var t=P-z,n;if(l.type==="single"){t<0&&(t=0);t>q&&(t=q)}else if(l.type==="double"){t<R&&(t=R);t>U&&(t=U);Q()}e.data(k[0],"x",t);Y();n=Math.round(t);k[0].style.left=n+"px"},Y=function(){var t={fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,toX:0},n=l.max-l.min,r,i;if(l.type==="single"){t.fromX=e.data(T[0],"x")||parseInt(T[0].style.left,10)||T.position().left;t.fromPers=t.fromX/F*100;r=n/100*t.fromPers+parseInt(l.min,10);t.fromNumber=Math.round(r/l.step)*l.step;W&&(t.fromNumber=parseInt(t.fromNumber*W,10)/W)}else if(l.type==="double"){t.fromX=e.data(N[0],"x")||parseInt(N[0].style.left,10)||N.position().left;t.fromPers=t.fromX/F*100;r=n/100*t.fromPers+parseInt(l.min,10);t.fromNumber=Math.round(r/l.step)*l.step;t.toX=e.data(C[0],"x")||parseInt(C[0].style.left,10)||C.position().left;t.toPers=t.toX/F*100;i=n/100*t.toPers+parseInt(l.min,10);t.toNumber=Math.round(i/l.step)*l.step;if(W){t.fromNumber=parseInt(t.fromNumber*W,10)/W;t.toNumber=parseInt(t.toNumber*W,10)/W}}D=t;et()},Z=function(){var t={fromNumber:l.from,toNumber:l.to,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},n=l.max-l.min;if(l.type==="single"){t.fromPers=(t.fromNumber-l.min)/n*100;t.fromX_pure=F/100*t.fromPers;t.fromX=Math.round(t.fromX_pure);T[0].style.left=t.fromX+"px";e.data(T[0],"x",t.fromX_pure)}else if(l.type==="double"){t.fromPers=(t.fromNumber-l.min)/n*100;t.fromX_pure=F/100*t.fromPers;t.fromX=Math.round(t.fromX_pure);N[0].style.left=t.fromX+"px";e.data(N[0],"x",t.fromX_pure);t.toPers=(t.toNumber-l.min)/n*100;t.toX_pure=F/100*t.toPers;t.toX=Math.round(t.toX_pure);C[0].style.left=t.toX+"px";e.data(C[0],"x",t.toX_pure);Q()}D=t;et()},et=function(){var e,t,n,r,i,s,o,u,a,f=I/2;if(l.type==="single"){if(!l.hideText){E[0].style.display="none";S[0].style.display="none";o=l.prefix+p(D.fromNumber)+l.postfix;x.html(o);u=x.outerWidth();a=D.fromX-u/2+f;a<0&&(a=0);a>j-u&&(a=j-u);x[0].style.left=a+"px";if(!l.hideMinMax&&!l.hideFromTo){a<H?b[0].style.display="none":b[0].style.display="block";a+u>j-B?w[0].style.display="none":w[0].style.display="block"}}c.attr("value",parseInt(D.fromNumber,10))}else if(l.type==="double"){if(!l.hideText){e=l.prefix+p(D.fromNumber)+l.postfix;r=l.prefix+p(D.toNumber)+l.postfix;D.fromNumber!==D.toNumber?o=l.prefix+p(D.fromNumber)+" — "+l.prefix+p(D.toNumber)+l.postfix:o=l.prefix+p(D.fromNumber)+l.postfix;E.html(e);S.html(r);x.html(o);t=E.outerWidth();n=D.fromX-t/2+f;n<0&&(n=0);n>j-t&&(n=j-t);E[0].style.left=n+"px";i=S.outerWidth();s=D.toX-i/2+f;s<0&&(s=0);s>j-i&&(s=j-i);S[0].style.left=s+"px";u=x.outerWidth();a=D.fromX+(D.toX-D.fromX)/2-u/2+f;a<0&&(a=0);a>j-u&&(a=j-u);x[0].style.left=a+"px";if(n+t<s){x[0].style.display="none";E[0].style.display="block";S[0].style.display="block"}else{x[0].style.display="block";E[0].style.display="none";S[0].style.display="none"}if(!l.hideMinMax&&!l.hideFromTo){a<H||n<H?b[0].style.display="none":b[0].style.display="block";a+u>j-B||s+i>j-B?w[0].style.display="none":w[0].style.display="block"}}c.attr("value",parseInt(D.fromNumber,10)+";"+parseInt(D.toNumber,10))}typeof l.onChange=="function"&&l.onChange.call(this,D);typeof l.onFinish=="function"&&!M&&!_&&l.onFinish.call(this,D);typeof l.onLoad=="function"&&!M&&_&&l.onLoad.call(this,D)},tt=function(){v.addClass("irs-with-grid");var e,t="",n=0,r=0,i="",s=20,o=4;for(e=0;e<=s;e+=1){n=Math.floor(j/s*e);n>=j&&(n=j-1);i+='<span class="irs-grid-pol small" style="left: '+n+'px;"></span>'}for(e=0;e<=o;e+=1){n=Math.floor(j/o*e);n>=j&&(n=j-1);i+='<span class="irs-grid-pol" style="left: '+n+'px;"></span>';if(W){t=l.min+(l.max-l.min)/o*e;t=t/l.step*l.step;t=parseInt(t*W,10)/W}else{t=Math.round(l.min+(l.max-l.min)/o*e);t=Math.round(t/l.step)*l.step;t=p(t)}if(e===0){r=n;i+='<span class="irs-grid-text" style="left: '+r+'px; text-align: left;">'+t+"</span>"}else if(e===o){r=n-100;i+='<span class="irs-grid-text" style="left: '+r+'px; text-align: right;">'+t+"</span>"}else{r=n-50;i+='<span class="irs-grid-text" style="left: '+r+'px;">'+t+"</span>"}}A.html(i)};V()})},update:function(e){return this.each(function(){this.updateData(e)})},remove:function(){return this.each(function(){this.removeSlider()})}};e.fn.ionRangeSlider=function(t){if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return u.init.apply(this,arguments);e.error("Method "+t+" does not exist for jQuery.ionRangeSlider")}})(jQuery,document,window,navigator);