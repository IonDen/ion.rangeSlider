(function(d,j,f,k,a){var l=0;var e=(function(){var q=k.userAgent,p=/msie\s\d+/i,o;if(q.search(p)>0){o=p.exec(q).toString();o=o.split(" ")[1];if(o<9){d("html").addClass("lt-ie9");return true}}return false}());if(!Function.prototype.bind){Function.prototype.bind=function h(p){var q=this;var r=[].slice;if(typeof q!="function"){throw new TypeError()}var n=r.call(arguments,1),o=function(){if(this instanceof o){var u=function(){};u.prototype=q.prototype;var t=new u();var s=q.apply(t,n.concat(r.call(arguments)));if(Object(s)===s){return s}return t}else{return q.apply(p,n.concat(r.call(arguments)))}};return o}}var g='<span class="irs"><span class="irs-line" tabindex="-1"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span><span class="irs-bar"></span>';var m='<span class="irs-bar-edge"></span><span class="irs-shadow shadow-single"></span><span class="irs-slider single"></span>';var b='<span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>';var c='<span class="irs-disable-mask"></span>';var i=function(n,o,p){this.VERSION="2.0.3";this.input=n;this.plugin_count=p;this.current_plugin=0;this.calc_count=0;this.old_from=0;this.old_to=0;this.raf_id=null;this.dragging=false;this.force_redraw=false;this.is_key=false;this.is_update=false;this.is_start=true;this.is_active=false;this.is_resize=false;this.is_click=false;this.$cache={win:d(f),body:d(j.body),input:d(n),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,grid:null,grid_labels:[]};var r=this.$cache.input;var q={type:r.data("type"),min:r.data("min"),max:r.data("max"),from:r.data("from"),to:r.data("to"),step:r.data("step"),min_interval:r.data("minInterval"),max_interval:r.data("maxInterval"),drag_interval:r.data("dragInterval"),values:r.data("values"),from_fixed:r.data("fromFixed"),from_min:r.data("fromMin"),from_max:r.data("fromMax"),from_shadow:r.data("fromShadow"),to_fixed:r.data("toFixed"),to_min:r.data("toMin"),to_max:r.data("toMax"),to_shadow:r.data("toShadow"),prettify_enabled:r.data("prettifyEnabled"),prettify_separator:r.data("prettifySeparator"),force_edges:r.data("forceEdges"),keyboard:r.data("keyboard"),keyboard_step:r.data("keyboardStep"),grid:r.data("grid"),grid_margin:r.data("gridMargin"),grid_num:r.data("gridNum"),grid_snap:r.data("gridSnap"),hide_min_max:r.data("hideMinMax"),hide_from_to:r.data("hideFromTo"),prefix:r.data("prefix"),postfix:r.data("postfix"),max_postfix:r.data("maxPostfix"),decorate_both:r.data("decorateBoth"),values_separator:r.data("valuesSeparator"),disable:r.data("disable")};q.values=q.values&&q.values.split(",");o=d.extend(q,o);this.options=d.extend({type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:false,values:[],p_values:[],from_fixed:false,from_min:null,from_max:null,from_shadow:false,to_fixed:false,to_min:null,to_max:null,to_shadow:false,prettify_enabled:true,prettify_separator:" ",prettify:null,force_edges:false,keyboard:false,keyboard_step:5,grid:false,grid_margin:true,grid_num:4,grid_snap:false,hide_min_max:false,hide_from_to:false,prefix:"",postfix:"",max_postfix:"",decorate_both:true,values_separator:" â€” ",disable:false,onStart:null,onChange:null,onFinish:null,onUpdate:null},o);this.validate();this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null};this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single:0,p_single_real:0,p_from:0,p_from_real:0,p_to:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]};this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from:0,p_from_left:0,p_to:0,p_to_left:0,p_single:0,p_single_left:0};this.init()};i.prototype={init:function(n){this.coords.p_step=this.options.step/((this.options.max-this.options.min)/100);this.target="base";this.toggleInput();this.append();this.setMinMax();this.force_redraw=true;this.calc(true);if(n){if(this.options.onUpdate&&typeof this.options.onUpdate==="function"){this.options.onUpdate(this.result)}}else{if(this.options.onStart&&typeof this.options.onStart==="function"){this.options.onStart(this.result)}}this.updateScene();this.raf_id=requestAnimationFrame(this.updateScene.bind(this))},append:function(){var n='<span class="irs js-irs-'+this.plugin_count+'"></span>';this.$cache.input.before(n);this.$cache.input.prop("readonly",true);this.$cache.cont=this.$cache.input.prev();this.result.slider=this.$cache.cont;this.$cache.cont.html(g);this.$cache.rs=this.$cache.cont.find(".irs");this.$cache.min=this.$cache.cont.find(".irs-min");this.$cache.max=this.$cache.cont.find(".irs-max");this.$cache.from=this.$cache.cont.find(".irs-from");this.$cache.to=this.$cache.cont.find(".irs-to");this.$cache.single=this.$cache.cont.find(".irs-single");this.$cache.bar=this.$cache.cont.find(".irs-bar");this.$cache.line=this.$cache.cont.find(".irs-line");this.$cache.grid=this.$cache.cont.find(".irs-grid");if(this.options.type==="single"){this.$cache.cont.append(m);this.$cache.s_single=this.$cache.cont.find(".single");this.$cache.from[0].style.visibility="hidden";this.$cache.to[0].style.visibility="hidden";this.$cache.shad_single=this.$cache.cont.find(".shadow-single")}else{this.$cache.cont.append(b);this.$cache.s_from=this.$cache.cont.find(".from");this.$cache.s_to=this.$cache.cont.find(".to");this.$cache.shad_from=this.$cache.cont.find(".shadow-from");this.$cache.shad_to=this.$cache.cont.find(".shadow-to")}if(this.options.hide_from_to){this.$cache.from[0].style.display="none";this.$cache.to[0].style.display="none";this.$cache.single[0].style.display="none"}this.appendGrid();if(this.options.disable){this.appendDisableMask();this.$cache.input[0].disabled=true}else{this.$cache.cont.removeClass("irs-disabled");this.$cache.input[0].disabled=false;this.bindEvents()}},appendDisableMask:function(){this.$cache.cont.append(c);this.$cache.cont.addClass("irs-disabled")},remove:function(){this.$cache.cont.remove();this.$cache.cont=null;this.$cache.line.off("keydown.irs_"+this.plugin_count);this.$cache.body.off("touchmove.irs_"+this.plugin_count);this.$cache.body.off("mousemove.irs_"+this.plugin_count);this.$cache.win.off("touchend.irs_"+this.plugin_count);this.$cache.win.off("mouseup.irs_"+this.plugin_count);if(e){this.$cache.body.off("mouseup.irs_"+this.plugin_count);this.$cache.body.off("mouseleave.irs_"+this.plugin_count)}this.$cache.grid_labels=[];this.coords.big=[];this.coords.big_w=[];this.coords.big_p=[];this.coords.big_x=[];cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));if(this.options.drag_interval&&this.options.type==="double"){this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"));this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))}else{this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))}if(this.options.type==="single"){this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single"));this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single"));this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))}else{this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from"));this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to"));this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from"));this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to"));this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))}if(this.options.keyboard){this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard"))}if(e){this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))}},pointerMove:function(o){if(!this.dragging){return}var n=o.pageX||o.originalEvent.touches&&o.originalEvent.touches[0].pageX;this.coords.x_pointer=n-this.coords.x_gap;this.calc()},pointerUp:function(o){if(this.current_plugin!==this.plugin_count){return}if(this.is_active){this.is_active=false}else{return}var n=this.options.onFinish&&typeof this.options.onFinish==="function",p=d.contains(this.$cache.cont[0],o.target)||this.dragging;if(n&&p){this.options.onFinish(this.result)}this.$cache.cont.find(".state_hover").removeClass("state_hover");this.force_redraw=true;this.dragging=false;if(e){d("*").prop("unselectable",false)}},pointerDown:function(p,o){o.preventDefault();var n=o.pageX||o.originalEvent.touches&&o.originalEvent.touches[0].pageX;if(o.button===2){return}this.current_plugin=this.plugin_count;this.target=p;this.is_active=true;this.dragging=true;this.coords.x_gap=this.$cache.rs.offset().left;this.coords.x_pointer=n-this.coords.x_gap;this.calcPointer();switch(p){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single);break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from);this.$cache.s_from.addClass("state_hover");this.$cache.s_from.addClass("type_last");this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to);this.$cache.s_to.addClass("state_hover");this.$cache.s_to.addClass("type_last");this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from);this.coords.p_gap_right=this.toFixed(this.coords.p_to-this.coords.p_pointer);this.$cache.s_to.removeClass("type_last");this.$cache.s_from.removeClass("type_last");break}if(e){d("*").prop("unselectable",true)}this.$cache.line.trigger("focus")},pointerClick:function(p,o){o.preventDefault();var n=o.pageX||o.originalEvent.touches&&o.originalEvent.touches[0].pageX;if(o.button===2){return}this.current_plugin=this.plugin_count;this.target=p;this.is_click=true;this.coords.x_gap=this.$cache.rs.offset().left;this.coords.x_pointer=+(n-this.coords.x_gap).toFixed();this.force_redraw=true;this.calc();this.$cache.line.trigger("focus")},key:function(o,n){if(this.current_plugin!==this.plugin_count||n.altKey||n.ctrlKey||n.shiftKey||n.metaKey){return}switch(n.which){case 83:case 65:case 40:case 37:n.preventDefault();this.moveByKey(false);break;case 87:case 68:case 38:case 39:n.preventDefault();this.moveByKey(true);break}return true},moveByKey:function(n){var o=this.coords.p_pointer;if(n){o+=this.options.keyboard_step}else{o-=this.options.keyboard_step}this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*o);this.is_key=true;this.calc()},setMinMax:function(){if(!this.options){return}if(this.options.hide_min_max){this.$cache.min[0].style.display="none";this.$cache.max[0].style.display="none";return}if(this.options.values.length){this.$cache.min.html(this.decorate(this.options.p_values[this.options.min]));this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))}else{this.$cache.min.html(this.decorate(this._prettify(this.options.min),this.options.min));this.$cache.max.html(this.decorate(this._prettify(this.options.max),this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(false);this.labels.w_max=this.$cache.max.outerWidth(false)},calc:function(s){if(!this.options){return}this.calc_count++;if(this.calc_count===10||s){this.calc_count=0;this.coords.w_rs=this.$cache.rs.outerWidth(false);if(this.options.type==="single"){this.coords.w_handle=this.$cache.s_single.outerWidth(false)}else{this.coords.w_handle=this.$cache.s_from.outerWidth(false)}}if(!this.coords.w_rs){return}this.calcPointer();this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100);var r=100-this.coords.p_handle,p=this.toFixed(this.coords.p_pointer-this.coords.p_gap);if(this.target==="click"){p=this.toFixed(this.coords.p_pointer-(this.coords.p_handle/2));this.target=this.chooseHandle(p)}if(p<0){p=0}else{if(p>r){p=r}}switch(this.target){case"base":var n=(this.options.max-this.options.min)/100,q=(this.result.from-this.options.min)/n,o=(this.result.to-this.options.min)/n;this.coords.p_single_real=this.toFixed(q);this.coords.p_from_real=this.toFixed(q);this.coords.p_to_real=this.toFixed(o);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_single=this.toFixed(q-(this.coords.p_handle/100*q));this.coords.p_from=this.toFixed(q-(this.coords.p_handle/100*q));this.coords.p_to=this.toFixed(o-(this.coords.p_handle/100*o));this.target=null;break;case"single":if(this.options.from_fixed){break}this.coords.p_single_real=this.calcWithStep(p/r*100);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_single=this.toFixed(this.coords.p_single_real/100*r);break;case"from":if(this.options.from_fixed){break}this.coords.p_from_real=this.calcWithStep(p/r*100);if(this.coords.p_from_real>this.coords.p_to_real){this.coords.p_from_real=this.coords.p_to_real}this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from=this.toFixed(this.coords.p_from_real/100*r);break;case"to":if(this.options.to_fixed){break}this.coords.p_to_real=this.calcWithStep(p/r*100);if(this.coords.p_to_real<this.coords.p_from_real){this.coords.p_to_real=this.coords.p_from_real}this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to=this.toFixed(this.coords.p_to_real/100*r);break;case"both":p=this.toFixed(p+(this.coords.p_handle*0.1));this.coords.p_from_real=this.calcWithStep((p-this.coords.p_gap_left)/r*100);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from=this.toFixed(this.coords.p_from_real/100*r);this.coords.p_to_real=this.calcWithStep((p+this.coords.p_gap_right)/r*100);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to=this.toFixed(this.coords.p_to_real/100*r);break}if(this.options.type==="single"){this.coords.p_bar_x=(this.coords.p_handle/2);this.coords.p_bar_w=this.coords.p_single;this.result.from_percent=this.coords.p_single_real;this.result.from=this.calcReal(this.coords.p_single_real);if(this.options.values.length){this.result.from_value=this.options.values[this.result.from]}}else{this.coords.p_bar_x=this.toFixed(this.coords.p_from+(this.coords.p_handle/2));this.coords.p_bar_w=this.toFixed(this.coords.p_to-this.coords.p_from);this.result.from_percent=this.coords.p_from_real;this.result.from=this.calcReal(this.coords.p_from_real);this.result.to_percent=this.coords.p_to_real;this.result.to=this.calcReal(this.coords.p_to_real);if(this.options.values.length){this.result.from_value=this.options.values[this.result.from];this.result.to_value=this.options.values[this.result.to]}}this.calcMinMax();this.calcLabels()},calcPointer:function(){if(!this.coords.w_rs){this.coords.p_pointer=0;return}if(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)){this.coords.x_pointer=0}else{if(this.coords.x_pointer>this.coords.w_rs){this.coords.x_pointer=this.coords.w_rs}}this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)},chooseHandle:function(n){if(this.options.type==="single"){return"single"}else{var o=this.coords.p_from_real+((this.coords.p_to_real-this.coords.p_from_real)/2);if(n>=o){return"to"}else{return"from"}}},calcMinMax:function(){if(!this.coords.w_rs){return}this.labels.p_min=this.labels.w_min/this.coords.w_rs*100;this.labels.p_max=this.labels.w_max/this.coords.w_rs*100},calcLabels:function(){if(!this.coords.w_rs||this.options.hide_from_to){return}if(this.options.type==="single"){this.labels.w_single=this.$cache.single.outerWidth(false);this.labels.p_single=this.labels.w_single/this.coords.w_rs*100;this.labels.p_single_left=this.coords.p_single+(this.coords.p_handle/2)-(this.labels.p_single/2);this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single)}else{this.labels.w_from=this.$cache.from.outerWidth(false);this.labels.p_from=this.labels.w_from/this.coords.w_rs*100;this.labels.p_from_left=this.coords.p_from+(this.coords.p_handle/2)-(this.labels.p_from/2);this.labels.p_from_left=this.toFixed(this.labels.p_from_left);this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from);this.labels.w_to=this.$cache.to.outerWidth(false);this.labels.p_to=this.labels.w_to/this.coords.w_rs*100;this.labels.p_to_left=this.coords.p_to+(this.coords.p_handle/2)-(this.labels.p_to/2);this.labels.p_to_left=this.toFixed(this.labels.p_to_left);this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to);this.labels.w_single=this.$cache.single.outerWidth(false);this.labels.p_single=this.labels.w_single/this.coords.w_rs*100;this.labels.p_single_left=((this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to)/2)-(this.labels.p_single/2);this.labels.p_single_left=this.toFixed(this.labels.p_single_left);this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single)}},updateScene:function(){if(!this.options){return}if(this.$cache.input.closest(":hidden").length==0){this.drawHandles()}this.raf_id=requestAnimationFrame(this.updateScene.bind(this))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(false);if(!this.coords.w_rs){return}if(this.coords.w_rs!==this.coords.w_rs_old){this.target="base";this.is_resize=true}if(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw){this.setMinMax();this.calc(true);this.drawLabels();if(this.options.grid){this.calcGridMargin();this.calcGridLabels()}this.force_redraw=true;this.coords.w_rs_old=this.coords.w_rs;this.drawShadow()}if(!this.coords.w_rs){return}if(!this.dragging&&!this.force_redraw&&!this.is_key){return}if(this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key){this.drawLabels();this.$cache.bar[0].style.left=this.coords.p_bar_x+"%";this.$cache.bar[0].style.width=this.coords.p_bar_w+"%";if(this.options.type==="single"){this.$cache.s_single[0].style.left=this.coords.p_single+"%";this.$cache.single[0].style.left=this.labels.p_single_left+"%";if(this.options.values.length){this.$cache.input.prop("value",this.result.from_value);this.$cache.input.data("from",this.result.from_value)}else{this.$cache.input.prop("value",this.result.from);this.$cache.input.data("from",this.result.from)}}else{this.$cache.s_from[0].style.left=this.coords.p_from+"%";this.$cache.s_to[0].style.left=this.coords.p_to+"%";if(this.old_from!==this.result.from||this.force_redraw){this.$cache.from[0].style.left=this.labels.p_from_left+"%"}if(this.old_to!==this.result.to||this.force_redraw){this.$cache.to[0].style.left=this.labels.p_to_left+"%"}this.$cache.single[0].style.left=this.labels.p_single_left+"%";if(this.options.values.length){this.$cache.input.prop("value",this.result.from_value+";"+this.result.to_value);this.$cache.input.data("from",this.result.from_value);this.$cache.input.data("to",this.result.to_value)}else{this.$cache.input.prop("value",this.result.from+";"+this.result.to);this.$cache.input.data("from",this.result.from);this.$cache.input.data("to",this.result.to)}}if((this.old_from!==this.result.from||this.old_to!==this.result.to)&&!this.is_start){this.$cache.input.trigger("change")}this.old_from=this.result.from;this.old_to=this.result.to;var o=this.options.onChange&&typeof this.options.onChange==="function"&&!this.is_resize;if(o&&!this.is_update&&!this.is_start){this.options.onChange(this.result)}var n=this.options.onFinish&&typeof this.options.onFinish==="function";if(n&&(this.is_key||this.is_click)){this.options.onFinish(this.result)}this.is_update=false;this.is_resize=false}this.is_start=false;this.is_key=false;this.is_click=false;this.force_redraw=false},drawLabels:function(){if(!this.options){return}var n=this.options.values.length,o=this.options.p_values,r,p,t;if(this.options.hide_from_to){return}if(this.options.type==="single"){if(n){r=this.decorate(o[this.result.from]);this.$cache.single.html(r)}else{r=this.decorate(this._prettify(this.result.from),this.result.from);this.$cache.single.html(r)}this.calcLabels();if(this.labels.p_single_left<this.labels.p_min+1){this.$cache.min[0].style.visibility="hidden"}else{this.$cache.min[0].style.visibility="visible"}if(this.labels.p_single_left+this.labels.p_single>100-this.labels.p_max-1){this.$cache.max[0].style.visibility="hidden"}else{this.$cache.max[0].style.visibility="visible"}}else{if(n){if(this.options.decorate_both){r=this.decorate(o[this.result.from]);r+=this.options.values_separator;r+=this.decorate(o[this.result.to])}else{r=this.decorate(o[this.result.from]+this.options.values_separator+o[this.result.to])}p=this.decorate(o[this.result.from]);t=this.decorate(o[this.result.to]);this.$cache.single.html(r);this.$cache.from.html(p);this.$cache.to.html(t)}else{if(this.options.decorate_both){r=this.decorate(this._prettify(this.result.from));r+=this.options.values_separator;r+=this.decorate(this._prettify(this.result.to))}else{r=this.decorate(this._prettify(this.result.from)+this.options.values_separator+this._prettify(this.result.to),this.result.from)}p=this.decorate(this._prettify(this.result.from),this.result.from);t=this.decorate(this._prettify(this.result.to),this.result.to);this.$cache.single.html(r);this.$cache.from.html(p);this.$cache.to.html(t)}this.calcLabels();var q=Math.min(this.labels.p_single_left,this.labels.p_from_left),u=this.labels.p_single_left+this.labels.p_single,v=this.labels.p_to_left+this.labels.p_to,s=Math.max(u,v);if(this.labels.p_from_left+this.labels.p_from>=this.labels.p_to_left){this.$cache.from[0].style.visibility="hidden";this.$cache.to[0].style.visibility="hidden";this.$cache.single[0].style.visibility="visible";if(this.result.from===this.result.to){this.$cache.from[0].style.visibility="visible";this.$cache.single[0].style.visibility="hidden";s=v}else{this.$cache.from[0].style.visibility="hidden";this.$cache.single[0].style.visibility="visible";s=Math.max(u,v)}}else{this.$cache.from[0].style.visibility="visible";this.$cache.to[0].style.visibility="visible";this.$cache.single[0].style.visibility="hidden"}if(q<this.labels.p_min+1){this.$cache.min[0].style.visibility="hidden"}else{this.$cache.min[0].style.visibility="visible"}if(s>100-this.labels.p_max-1){this.$cache.max[0].style.visibility="hidden"}else{this.$cache.max[0].style.visibility="visible"}}},drawShadow:function(){var s=this.options,t=this.$cache,r,p,q,n;if(s.type==="single"){if(s.from_shadow&&(s.from_min||s.from_max)){r=this.calcPercent(s.from_min||s.min);p=this.calcPercent(s.from_max||s.max)-r;r=this.toFixed(r-(this.coords.p_handle/100*r));p=this.toFixed(p-(this.coords.p_handle/100*p));r=r+(this.coords.p_handle/2);t.shad_single[0].style.display="block";t.shad_single[0].style.left=r+"%";t.shad_single[0].style.width=p+"%"}else{t.shad_single[0].style.display="none"}}else{if(s.from_shadow&&(s.from_min||s.from_max)){r=this.calcPercent(s.from_min||s.min);p=this.calcPercent(s.from_max||s.max)-r;r=this.toFixed(r-(this.coords.p_handle/100*r));p=this.toFixed(p-(this.coords.p_handle/100*p));r=r+(this.coords.p_handle/2);t.shad_from[0].style.display="block";t.shad_from[0].style.left=r+"%";t.shad_from[0].style.width=p+"%"}else{t.shad_from[0].style.display="none"}if(s.to_shadow&&(s.to_min||s.to_max)){q=this.calcPercent(s.to_min||s.min);n=this.calcPercent(s.to_max||s.max)-q;q=this.toFixed(q-(this.coords.p_handle/100*q));n=this.toFixed(n-(this.coords.p_handle/100*n));q=q+(this.coords.p_handle/2);t.shad_to[0].style.display="block";t.shad_to[0].style.left=q+"%";t.shad_to[0].style.width=n+"%"}else{t.shad_to[0].style.display="none"}}},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input")},calcPercent:function(o){var n=(this.options.max-this.options.min)/100,p=(o-this.options.min)/n;return this.toFixed(p)},calcReal:function(s){var q=this.options.min,o=this.options.max,n=0;if(q<0){n=Math.abs(q);q=q+n;o=o+n}var r=((o-q)/100*s)+q,p=this.options.step.toString().split(".")[1];if(p){r=+r.toFixed(p.length)}else{r=r/this.options.step;r=r*this.options.step;r=+r.toFixed(0)}if(n){r-=n}if(r<this.options.min){r=this.options.min}else{if(r>this.options.max){r=this.options.max}}if(p){return +r.toFixed(p.length)}else{return this.toFixed(r)}},calcWithStep:function(o){var n=Math.round(o/this.coords.p_step)*this.coords.p_step;if(n>100){n=100}if(o===100){n=100}return this.toFixed(n)},checkMinInterval:function(r,n,q){var t=this.options,s,p;if(!t.min_interval){return r}s=this.calcReal(r);p=this.calcReal(n);if(q==="from"){if(p-s<t.min_interval){s=p-t.min_interval}}else{if(s-p<t.min_interval){s=p+t.min_interval}}return this.calcPercent(s)},checkMaxInterval:function(r,n,q){var t=this.options,s,p;if(!t.max_interval){return r}s=this.calcReal(r);p=this.calcReal(n);if(q==="from"){if(p-s>t.max_interval){s=p-t.max_interval}}else{if(s-p>t.max_interval){s=p+t.max_interval}}return this.calcPercent(s)},checkDiapason:function(r,q,n){var p=this.calcReal(r),s=this.options;if(!q||typeof q!=="number"){q=s.min}if(!n||typeof n!=="number"){n=s.max}if(p<q){p=q}if(p>n){p=n}return this.calcPercent(p)},toFixed:function(n){n=n.toFixed(5);return +n},_prettify:function(n){if(!this.options.prettify_enabled){return n}if(this.options.prettify&&typeof this.options.prettify==="function"){return this.options.prettify(n)}else{return this.prettify(n)}},prettify:function(o){var p=o.toString();return p.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(o,n){if(!this.options.force_edges){return this.toFixed(o)}if(o<0){o=0}else{if(o>100-n){o=100-n}}return this.toFixed(o)},validate:function(){var u=this.options,s=this.result,n=u.values,q=n.length,t,p;if(typeof u.min==="string"){u.min=+u.min}if(typeof u.max==="string"){u.max=+u.max}if(typeof u.from==="string"){u.from=+u.from}if(typeof u.to==="string"){u.to=+u.to}if(typeof u.step==="string"){u.step=+u.step}if(typeof u.from_min==="string"){u.from_min=+u.from_min}if(typeof u.from_max==="string"){u.from_max=+u.from_max}if(typeof u.to_min==="string"){u.to_min=+u.to_min}if(typeof u.to_max==="string"){u.to_max=+u.to_max}if(typeof u.keyboard_step==="string"){u.keyboard_step=+u.keyboard_step}if(typeof u.grid_num==="string"){u.grid_num=+u.grid_num}if(u.max<=u.min){if(u.min){u.max=u.min*2}else{u.max=u.min+1}u.step=1}if(q){u.p_values=[];u.min=0;u.max=q-1;u.step=1;u.grid_num=u.max;u.grid_snap=true;for(p=0;p<q;p++){t=+n[p];if(!isNaN(t)){n[p]=t;t=this._prettify(t)}else{t=n[p]}u.p_values.push(t)}}if(typeof u.from!=="number"||isNaN(u.from)){u.from=u.min}if(typeof u.to!=="number"||isNaN(u.from)){u.to=u.max}if(u.from<u.min||u.from>u.max){u.from=u.min}if(u.to>u.max||u.to<u.min){u.to=u.max}if(u.type==="double"&&u.from>u.to){u.from=u.to}if(typeof u.step!=="number"||isNaN(u.step)||!u.step||u.step<0){u.step=1}if(typeof u.keyboard_step!=="number"||isNaN(u.keyboard_step)||!u.keyboard_step||u.keyboard_step<0){u.keyboard_step=5}if(u.from_min&&u.from<u.from_min){u.from=u.from_min}if(u.from_max&&u.from>u.from_max){u.from=u.from_max}if(u.to_min&&u.to<u.to_min){u.to=u.to_min}if(u.to_max&&u.from>u.to_max){u.to=u.to_max}if(s){if(s.min!==u.min){s.min=u.min}if(s.max!==u.max){s.max=u.max}if(s.from<s.min||s.from>s.max){s.from=u.from}if(s.to<s.min||s.to>s.max){s.to=u.to}}if(typeof u.min_interval!=="number"||isNaN(u.min_interval)||!u.min_interval||u.min_interval<0){u.min_interval=0}if(typeof u.max_interval!=="number"||isNaN(u.max_interval)||!u.max_interval||u.max_interval<0){u.max_interval=0}if(u.min_interval&&u.min_interval>u.max-u.min){u.min_interval=u.max-u.min}if(u.max_interval&&u.max_interval>u.max-u.min){u.max_interval=u.max-u.min}},decorate:function(n,p){var q="",r=this.options;if(r.prefix){q+=r.prefix}q+=n;if(r.max_postfix){if(r.values.length&&n===r.p_values[r.max]){q+=r.max_postfix;if(r.postfix){q+=" "}}else{if(p===r.max){q+=r.max_postfix;if(r.postfix){q+=" "}}}}if(r.postfix){q+=r.postfix}return q},updateFrom:function(){this.result.from=this.options.from;this.result.from_percent=this.calcPercent(this.result.from);if(this.options.values){this.result.from_value=this.options.values[this.result.from]}},updateTo:function(){this.result.to=this.options.to;this.result.to_percent=this.calcPercent(this.result.to);if(this.options.values){this.result.to_value=this.options.values[this.result.to]}},updateResult:function(){this.result.min=this.options.min;this.result.max=this.options.max;this.updateFrom();this.updateTo()},appendGrid:function(){if(!this.options.grid){return}var n=this.options,q,w,x=n.max-n.min,B=n.grid_num,t=0,p=0,s=4,v,y,u=0,A,r="";this.calcGridMargin();if(n.grid_snap){B=x/n.step;t=this.toFixed(n.step/(x/100))}else{t=this.toFixed(100/B)}if(B>4){s=3}if(B>7){s=2}if(B>14){s=1}if(B>28){s=0}for(q=0;q<B+1;q++){v=s;p=this.toFixed(t*q);if(p>100){p=100;v-=2;if(v<0){v=0}}this.coords.big[q]=p;y=(p-(t*(q-1)))/(v+1);for(w=1;w<=v;w++){if(p===0){break}u=this.toFixed(p-(y*w));r+='<span class="irs-grid-pol small" style="left: '+u+'%"></span>'}r+='<span class="irs-grid-pol" style="left: '+p+'%"></span>';A=this.calcReal(p);if(n.values.length){A=n.p_values[A]}else{A=this._prettify(A)}r+='<span class="irs-grid-text js-grid-text-'+q+'" style="left: '+p+'%">'+A+"</span>"}this.coords.big_num=Math.ceil(B+1);this.$cache.cont.addClass("irs-with-grid");this.$cache.grid.html(r);this.cacheGridLabels()},cacheGridLabels:function(){var n,p,o=this.coords.big_num;for(p=0;p<o;p++){n=this.$cache.grid.find(".js-grid-text-"+p);this.$cache.grid_labels.push(n)}this.calcGridLabels()},calcGridLabels:function(){var q,o,r=[],p=[],n=this.coords.big_num;for(q=0;q<n;q++){this.coords.big_w[q]=this.$cache.grid_labels[q].outerWidth(false);this.coords.big_p[q]=this.toFixed(this.coords.big_w[q]/this.coords.w_rs*100);this.coords.big_x[q]=this.toFixed(this.coords.big_p[q]/2);r[q]=this.toFixed(this.coords.big[q]-this.coords.big_x[q]);p[q]=this.toFixed(r[q]+this.coords.big_p[q])}if(this.options.force_edges){if(r[0]<this.coords.grid_gap){r[0]=this.coords.grid_gap;p[0]=this.toFixed(r[0]+this.coords.big_p[0]);this.coords.big_x[0]=this.coords.grid_gap}if(p[n-1]>100-this.coords.grid_gap){p[n-1]=100-this.coords.grid_gap;r[n-1]=this.toFixed(p[n-1]-this.coords.big_p[n-1]);this.coords.big_x[n-1]=this.toFixed(this.coords.big_p[n-1]-this.coords.grid_gap)}}this.calcGridCollision(2,r,p);this.calcGridCollision(4,r,p);for(q=0;q<n;q++){o=this.$cache.grid_labels[q][0];o.style.marginLeft=-this.coords.big_x[q]+"%"}},calcGridCollision:function(s,t,r){var q,n,p,o=this.coords.big_num;for(q=0;q<o;q+=s){n=q+(s/2);if(n>=o){break}p=this.$cache.grid_labels[n][0];if(r[q]<=t[n]){p.style.visibility="visible"}else{p.style.visibility="hidden"}}},calcGridMargin:function(){if(!this.options.grid_margin){return}this.coords.w_rs=this.$cache.rs.outerWidth(false);if(!this.coords.w_rs){return}if(this.options.type==="single"){this.coords.w_handle=this.$cache.s_single.outerWidth(false)}else{this.coords.w_handle=this.$cache.s_from.outerWidth(false)}this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100);this.coords.grid_gap=this.toFixed((this.coords.p_handle/2)-0.1);this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%";this.$cache.grid[0].style.left=this.coords.grid_gap+"%"},update:function(n){if(!this.input){return}this.is_update=true;this.options.from=this.result.from;this.options.to=this.result.to;this.options=d.extend(this.options,n);this.validate();this.updateResult(n);this.toggleInput();this.remove();this.init(true)},reset:function(){if(!this.input){return}this.updateResult();this.update()},destroy:function(){if(!this.input){return}this.toggleInput();this.$cache.input.prop("readonly",false);d.data(this.input,"ionRangeSlider",null);this.remove();this.input=null;this.options=null}};d.fn.ionRangeSlider=function(n){return this.each(function(){if(!d.data(this,"ionRangeSlider")){d.data(this,"ionRangeSlider",new i(this,n,l++))}})};(function(){var o=0;var p=["ms","moz","webkit","o"];for(var n=0;n<p.length&&!f.requestAnimationFrame;++n){f.requestAnimationFrame=f[p[n]+"RequestAnimationFrame"];f.cancelAnimationFrame=f[p[n]+"CancelAnimationFrame"]||f[p[n]+"CancelRequestAnimationFrame"]}if(!f.requestAnimationFrame){f.requestAnimationFrame=function(u,r){var q=new Date().getTime();var s=Math.max(0,16-(q-o));var t=f.setTimeout(function(){u(q+s)},s);o=q+s;return t}}if(!f.cancelAnimationFrame){f.cancelAnimationFrame=function(q){clearTimeout(q)}}}())}(jQuery,document,window,navigator));